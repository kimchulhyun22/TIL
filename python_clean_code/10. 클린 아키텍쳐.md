# 10. 클린 아키텍쳐

---

## 클린 코드에서 클린 아키텍처로

코드는 아키텍처의 기초이다. 따라서 코드를 대충 작성하면 아키텍처와 상관없이 전체 프로젝트는 실패할 것이다. 따라서 디자인 아이디어가 코드에만 적용 가능하고
아키텍처에 대해서는 의미가 없는 것은 아니다. 

### 1) 관심사의 분리

애플리케이션 내부에는 여러 컴포넌트가 있다. 컴포넌트 코드는 모듈이나 패키지와 같은 하위 컴포넌트로 나뉘며 모듈은 클래스나 함수로, 클래스는 다시 메서드로 나눌
수 있다. 지금까지 컴포넌트를 가능한 작게 유지하는 데 중점을 두었는데 이는 함수를 작게 만들면 이해하기 쉽고 따라가기 쉬우며 디버깅과 테스트하기가 쉬워지기
때문이다. 

애플리케이션의 코드는 높은 응집력과 낮은 결합력을 가져야 한다. 컴포넌트를 작은 유닛으로 나누어 하나의 잘 정의된 책임을 갖게 하고 수정이 쉽도록 하면 보다
나은 구조를 얻을 수 있다. 새로운 요구사항이 생기면 단 하나의 장소에서만 수정해야 하고 나머지 코드는 영향을 받지 않아야 한다.

대형 시스템을 하나의 컴포넌트로 구현하는 것은 바람직하지 않다. 모노리식 단일 애플리케이션은 시스템의 모든 것을 책임지고 의도하지 않은 결과를 유발할 수 있다.
따라서 응집력 있는 시스템 컴포넌트를 만드는 것은 추상화의 수준에 따라 다양하게 구현할 수 있다. 재사용될 만한 공통 로직을 파이썬 패키지에 둘 수도 있고
마이크로 서비스 아키텍처를 사용하여 애플리케이션을 여러 개의 작은 서비스로 나눌 수 있다. 

### 2) 추상화

코드 레벨에서 했던 것처럼 시스템 도메인 문제에 대해서도 추상화란 세부 구현 사항을 최대한 숨기는 것이다. 코드는 그 자체로 문서화가 되는 정도의 표현력을
가져야 하며, 문제의 본질에 대한 해결책을 제시하는 올바른 추상화를 해야 한다. 아키텍처도 마찬가지로 그 자체로 시스템이 어떻게 되는지 설명할 수 있어야 한다.

모든 애플리케이션이 독립적이고 제어할 수 없는 것으로부터 격리되기를 원한다. 즉 객체를 추상화하는 것 이상으로 추상화의 계층이 필요하다. 예를 들어 "ORM은
데이터베이스에 대해 좋은 추상화이다."라고 주장할 수 있지만 ORM API와 애플리케이션 사이에 중간 계층인 어댑터를 만드는 것이 더 좋다.
ORM만으로 데이터베이스를 추상화했다고 볼 수는 없고 그 위에 추상화 계층을 사용하여 도메인에 속한 자신만의 객체를 정의해야 한다.
